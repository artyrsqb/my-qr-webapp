<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>Family Shopping</title>
    
    <script src="https://telegram.org/js/telegram-web-app.js"></script>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700;800&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="styles.css">
</head>
<body>
    <div class="header"></div>

    <div class="tabs">
        <div class="tab active" onclick="switchTab('todo')">üìù –ê–∫—Ç–∏–≤–Ω—ã–µ</div>
        <div class="tab" onclick="switchTab('done')">‚úÖ –ê—Ä—Ö–∏–≤</div>
        <div class="tab" onclick="switchTab('recipes')">üìñ –†–µ—Ü–µ–ø—Ç—ã</div>
    </div>

    <!-- –í–∫–ª–∞–¥–∫–∞ "–ê–∫—Ç–∏–≤–Ω—ã–µ" -->
    <div id="tab-todo" class="tab-content">
        <div class="card">
            <div class="input-label">‚ö° –ë—ã—Å—Ç—Ä—ã–µ —à–∞–±–ª–æ–Ω—ã</div>
            <div class="tags-container" id="quick-templates-list"></div>
        </div>

        <div class="card">
            <div class="input-label">üìå –ö–∞—Ç–µ–≥–æ—Ä–∏–∏</div>
            <div class="tags-container">
                <div id="category-tags"></div>
                <button class="settings-btn" onclick="openCategorySettings()">‚öôÔ∏è</button>
            </div>

            <div class="input-label">üè™ –ú–∞–≥–∞–∑–∏–Ω—ã</div>
            <div class="tags-container">
                <div id="shop-tags"></div>
                <button class="settings-btn" onclick="openShopSettings()">‚öôÔ∏è</button>
            </div>
        </div>

        <div class="card">
            <div class="input-label">üõí –ù–æ–≤—ã–π —Å–ø–∏—Å–æ–∫ –ø–æ–∫—É–ø–æ–∫</div>
            <form id="note-form">
                <select id="category" required></select>
                <select id="shop"></select>
                <input type="date" id="date" placeholder="–î–∞—Ç–∞ (–Ω–µ–æ–±—è–∑–∞—Ç–µ–ª—å–Ω–æ)">
                <textarea id="items-input" placeholder="–í–≤–µ–¥–∏—Ç–µ —Ç–æ–≤–∞—Ä—ã (–∫–∞–∂–¥—ã–π —Å –Ω–æ–≤–æ–π —Å—Ç—Ä–æ–∫–∏)"></textarea>
                <button type="submit" class="main-btn">–î–æ–±–∞–≤–∏—Ç—å —Å–ø–∏—Å–æ–∫</button>
            </form>
        </div>

        <div class="card">
            <div style="display: flex; align-items: center; justify-content: space-between; margin-bottom: 16px;">
                <div class="input-label" style="margin: 0;">üìã –ú–æ–∏ —Å–ø–∏—Å–∫–∏</div>
                <button class="theme-toggle" onclick="toggleTheme()">
                    <span id="theme-icon">üåô</span>
                    <span id="theme-text">–¢–µ–º–Ω–∞—è</span>
                </button>
            </div>
            <div id="todo-list"></div>
        </div>
    </div>

    <!-- –í–∫–ª–∞–¥–∫–∞ "–ê—Ä—Ö–∏–≤" -->
    <div id="tab-done" class="tab-content" style="display: none;">
        <div class="card">
            <div style="display: flex; align-items: center; justify-content: space-between; margin-bottom: 16px;">
                <div class="input-label" style="margin: 0;">‚úÖ –í—ã–ø–æ–ª–Ω–µ–Ω–Ω—ã–µ —Å–ø–∏—Å–∫–∏</div>
                <button class="main-btn" onclick="clearArchive()" 
                        style="width: auto; padding: 10px 16px; font-size: 13px; background: var(--danger);">
                    –û—á–∏—Å—Ç–∏—Ç—å –∞—Ä—Ö–∏–≤
                </button>
            </div>
            <div id="done-list"></div>
        </div>
    </div>

    <!-- –í–∫–ª–∞–¥–∫–∞ "–†–µ—Ü–µ–ø—Ç—ã" -->
    <div id="tab-recipes" class="tab-content" style="display: none;">
        <div class="card">
            <div class="input-label">‚ûï –î–æ–±–∞–≤–∏—Ç—å —Ä–µ—Ü–µ–ø—Ç</div>
            <form id="recipe-form">
                <input type="text" id="recipe-name" placeholder="–ù–∞–∑–≤–∞–Ω–∏–µ —Ä–µ—Ü–µ–ø—Ç–∞" required>
                <textarea id="recipe-description" placeholder="–û–ø–∏—Å–∞–Ω–∏–µ (–Ω–µ–æ–±—è–∑–∞—Ç–µ–ª—å–Ω–æ)" style="height: 120px;"></textarea>
                <textarea id="recipe-ingredients" placeholder="–ò–Ω–≥—Ä–µ–¥–∏–µ–Ω—Ç—ã (–∫–∞–∂–¥—ã–π —Å –Ω–æ–≤–æ–π —Å—Ç—Ä–æ–∫–∏)" style="height: 100px;"></textarea>
                <button type="submit" class="main-btn">–°–æ—Ö—Ä–∞–Ω–∏—Ç—å —Ä–µ—Ü–µ–ø—Ç</button>
            </form>
        </div>

        <div class="card">
            <div class="input-label">üìñ –ú–æ–∏ —Ä–µ—Ü–µ–ø—Ç—ã</div>
            <div id="recipe-list"></div>
        </div>
    </div>

    <!-- –ú–æ–¥–∞–ª—å–Ω–æ–µ –æ–∫–Ω–æ –∫–∞—Ç–µ–≥–æ—Ä–∏–π -->
    <div id="category-modal" class="modal" onclick="closeModal(event, 'category-modal')">
        <div class="modal-content" onclick="event.stopPropagation()">
            <h3>–£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –∫–∞—Ç–µ–≥–æ—Ä–∏—è–º–∏</h3>
            <form id="category-form">
                <input type="text" id="new-category" placeholder="–ù–∞–∑–≤–∞–Ω–∏–µ –Ω–æ–≤–æ–π –∫–∞—Ç–µ–≥–æ—Ä–∏–∏" required>
                <button type="submit" class="main-btn">–î–æ–±–∞–≤–∏—Ç—å –∫–∞—Ç–µ–≥–æ—Ä–∏—é</button>
            </form>
            <div id="category-list-modal"></div>
        </div>
    </div>

    <!-- –ú–æ–¥–∞–ª—å–Ω–æ–µ –æ–∫–Ω–æ –º–∞–≥–∞–∑–∏–Ω–æ–≤ -->
    <div id="shop-modal" class="modal" onclick="closeModal(event, 'shop-modal')">
        <div class="modal-content" onclick="event.stopPropagation()">
            <h3>–£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –º–∞–≥–∞–∑–∏–Ω–∞–º–∏</h3>
            <form id="shop-form">
                <input type="text" id="new-shop" placeholder="–ù–∞–∑–≤–∞–Ω–∏–µ –º–∞–≥–∞–∑–∏–Ω–∞" required>
                <button type="submit" class="main-btn">–î–æ–±–∞–≤–∏—Ç—å –º–∞–≥–∞–∑–∏–Ω</button>
            </form>
            <div id="shop-list-modal"></div>
        </div>
    </div>

    <!-- –ú–æ–¥–∞–ª—å–Ω–æ–µ –æ–∫–Ω–æ –¥–µ—Ç–∞–ª–µ–π —Å–ø–∏—Å–∫–∞ –ø–æ–∫—É–ø–æ–∫ -->
    <div id="note-modal" class="modal" onclick="closeModal(event, 'note-modal')">
        <div class="modal-content" onclick="event.stopPropagation()">
            <div style="display: flex; align-items: center; gap: 12px; margin-bottom: 20px;">
                <div id="note-modal-header" style="flex: 1;"></div>
            </div>
            <div id="note-modal-items"></div>
            <div id="note-modal-actions"></div>
        </div>
    </div>

    <!-- –ú–æ–¥–∞–ª—å–Ω–æ–µ –æ–∫–Ω–æ —Ä–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏—è —Å–ø–∏—Å–∫–∞ -->
    <div id="edit-modal" class="modal" onclick="closeModal(event, 'edit-modal')">
        <div class="modal-content" onclick="event.stopPropagation()">
            <h3>‚úèÔ∏è –†–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞—Ç—å —Å–ø–∏—Å–æ–∫</h3>
            <form id="edit-form">
                <div class="input-label">–ö–∞—Ç–µ–≥–æ—Ä–∏—è</div>
                <select id="edit-category" required></select>
                
                <div class="input-label">–ú–∞–≥–∞–∑–∏–Ω</div>
                <select id="edit-shop"></select>
                
                <div class="input-label">–î–∞—Ç–∞</div>
                <input type="date" id="edit-date" placeholder="–î–∞—Ç–∞ (–Ω–µ–æ–±—è–∑–∞—Ç–µ–ª—å–Ω–æ)">
                
                <div class="input-label">–¢–æ–≤–∞—Ä—ã</div>
                <textarea id="edit-items" placeholder="–í–≤–µ–¥–∏—Ç–µ —Ç–æ–≤–∞—Ä—ã (–∫–∞–∂–¥—ã–π —Å –Ω–æ–≤–æ–π —Å—Ç—Ä–æ–∫–∏)"></textarea>
                
                <button type="submit" class="main-btn">–°–æ—Ö—Ä–∞–Ω–∏—Ç—å –∏–∑–º–µ–Ω–µ–Ω–∏—è</button>
            </form>
        </div>
    </div>

    <!-- –ú–æ–¥–∞–ª—å–Ω–æ–µ –æ–∫–Ω–æ —Ä–µ—Ü–µ–ø—Ç–∞ -->
    <div id="recipe-modal" class="modal" onclick="closeModal(event, 'recipe-modal')">
        <div class="modal-content" onclick="event.stopPropagation()">
            <h3 id="recipe-modal-title"></h3>
            <p id="recipe-modal-description" style="color: var(--text-secondary); margin-bottom: 20px;"></p>
            <div class="input-label">–ò–Ω–≥—Ä–µ–¥–∏–µ–Ω—Ç—ã</div>
            <div id="recipe-modal-ingredients" style="margin-bottom: 20px;"></div>
            <div id="recipe-modal-actions"></div>
        </div>
    </div>

    <!-- –£–≤–µ–¥–æ–º–ª–µ–Ω–∏–µ -->
    <div id="notification" class="notification"></div>

    <script src="script.js"></script>
</body>
</html>
