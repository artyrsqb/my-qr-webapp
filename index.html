<!DOCTYPE html>
<html>
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>QR Generator WebApp</title>
    <script src="https://telegram.org/js/telegram-web-app.js"></script>
    <style>
        body { 
            font-family: sans-serif; text-align: center; padding: 20px; 
            background-color: var(--tg-theme-bg-color, #fff); 
            color: var(--tg-theme-text-color, #000); 
        }
        .container { display: flex; flex-direction: column; align-items: center; gap: 10px; }
        input { width: 80%; padding: 12px; border-radius: 8px; border: 1px solid #ccc; }
        .controls { display: flex; align-items: center; gap: 10px; margin: 10px 0; }
        button { 
            padding: 12px 24px; 
            background: var(--tg-theme-button-color, #0088cc); 
            color: var(--tg-theme-button-text-color, #fff); 
            border: none; border-radius: 8px; cursor: pointer; font-weight: bold;
        }
    </style>
</head>
<body>
    <div class="container">
        <h3>Генератор QR-кода</h3>
        <input type="text" id="qr_data" placeholder="Введите текст или ссылку">
        
        <div class="controls">
            <span>Цвет:</span>
            <input type="color" id="qr_color" value="#000000">
        </div>

        <button onclick="sendData()">Создать QR</button>
    </div>

    <script>
        const tg = window.Telegram.WebApp;
        tg.expand();

        function sendData() {
            const dataInput = document.getElementById("qr_data").value;
            const colorInput = document.getElementById("qr_color").value;

            if (dataInput.trim() === "") {
                tg.showAlert("Введите текст!");
                return;
            }
            
            // Собираем данные в строку JSON
            const payload = JSON.stringify({
                text: dataInput,
                color: colorInput
            });

            tg.sendData(payload); 
            tg.close();
        }
    </script>
</body>
</html>